<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/layout/index :: dynamic(~{::main})}"> <!--  thay toàn bộ nd trong tag main vào dynamic(main) ở bên layout/index -->
<body>
  	<main>
		<div class="container-fluid bg-light py-4">
        <div class="col-6 m-auto text-center">
            <h1 class="fw-bold">My Cart</h1>
            <p>Những Sản Phẩm Bạn Lựa Chọn</p>
        </div>
    </div>
	<!-- Close Cart Page -->
	
	<!-- Start Cart -->
	
	<div class="container mx-auto col-10 mt-5 mb-5">
	<h3 ng-if="cart.items == 0" class="fw-bold text-center">Giỏ Hàng Của Bạn Hiện Chưa Có Sản Phẩm Nào !! <i class="far fa-times-circle"></i></h3> <!-- Nếu giỏ hàng chưa có sp -->
	<div class="border border-bottom-0">
			<form ng-repeat="item in cart.items" class="mt-3">
				<div class="form-group mb-3 row">
					<div class="col-2 pe-1">
						<img th:src="@{|/images/{{item.product_img1}}|}" class="w-75 img-thumbnail mx-auto d-block">
					</div>
					<div class="col-6 p-0 my-auto">
						<div class="fw-bold">{{item.product_name}}</div>
						<div>
							<label class="fw-bold">Số Lượng: </label>
							<a class="btn btn-danger text-white btn-xs fw-bold" style="width: 40px;" ng-click="cart.reduce(item.id)">-</a>
							<input name="qty" min="1" ng-change="cart.saveToLocalStorage()" ng-model="item.qty" style="width: 50px; border:none" class="text-center">
							<a class="btn btn-danger text-white btn-xs fw-bold" style="width: 40px;" ng-click="cart.increase(item.id)">+</a>
						</div>
						<div>
							<a ng-click="cart.remove(item.id)" class="fw-bold"><i class="far fa-trash-alt"></i> Xóa</a>
						</div>
					</div>
					<div class="col-4 p-0 mt-4">
						<label class="text-danger"><b class="text-dark fw-bold">Giá SP: </b>{{item.product_price | number}}<sup>VNĐ</sup></label><br>
						<label class="text-danger"><b class="text-dark fw-bold">Thành Tiền: </b>{{item.product_price * item.qty | number}}<sup>VNĐ</sup></label>
					</div>
				</div>
			</form> <!-- FORM -->
			<hr>
		</div>
		<!-- ALL BUTTON -->
	<div class="row mt-3">
		<div class="col-5">
			<a ng-click="cart.clear()" class="btn btn-outline-danger btn-lg fw-bold"><i class="fa fa-minus-square"></i> Xóa Giỏ Hàng</a> 
			<a th:href="@{|/shop/search|}" class="btn btn-outline-danger btn-lg fw-bold"><i class="fa fa-plus-square"></i> Thêm Sản Phẩm Khác</a>
		</div>
		<div class="col-4 ms-auto"> <!-- ms-auto: đẩy sang trái -->
				<div class="border rounded mb-3">
					<ul class="list-group">
						<li class="list-group-item py-3 fw-bold">Total: <span>{{cart.amount | number}}<sup>VNĐ</sup></span></li>
					</ul>
					<c:if test="${accountLogin == null}">
						<a href="/home/login" class="btn btn-outline-dark fw-bold btn-lg" style="width:100%;">Mua Hàng</a>
					</c:if>
					<c:if test="${accountLogin != null && cart_NoProduct !=0}"> <!-- Nếu đã đăng nhập & giỏ hàng phải có sản phẩm thì mới hiện nút mua hàng -->
						<a th:href="@{|/order/checkout|}" class="btn btn-outline-dark fw-bold btn-lg" style="width:100%;">Mua Hàng</a>
					</c:if>
				</div>
		</div>
	</div>
	<!-- END ALL BUTTON -->
	</div>
	<!-- Close Cart Page -->
	</main> 
</body>
</html>